---
description: Visual process map for CREATIVE mode (Design Decisions)
globs: "**/creative*/**", "**/design*/**", "**/decision*/**"
alwaysApply: false
---

# CREATIVE MODE: DESIGN PROCESS MAP

üö® MANDATORY: DATE/TIME STAMPS MUST USE sys8 MCP üö®
When updating ANY timestamp fields in creative phase documents:
- MUST call sys8 MCP get_current_datetime FIRST
- MUST use the datetime value returned by sys8 MCP
- MUST NOT use JavaScript Date(), hardcoded dates, or any other method
- This applies to "Last Updated", "Date", and all other date/time fields

üö® MANDATORY: TASK ID IN CREATIVE DOCUMENT FILENAME üö®
**ALL creative phase documents MUST include task ID in the filename.**
- Format: `creative-[task_id]-[feature_name].md` (e.g., `creative-DEV-0053-obsidian-plugin-ux.md`)
- Location: `memory-bank/creative/creative-[task_id]-[feature_name].md`
- **How to get task ID:** Read `memory-bank/activeContext.md` to get current task ID
- **Task ID format:** `[PREFIX]-[4-digit-number]` (e.g., `DEV-0053`, `FIN-0001`, `QA-0008`)
- See: `Core/task-numbering-system.mdc` for task ID format details

> **TL;DR:** This visual map guides the CREATIVE mode process, focusing on structured design decision-making for components that require deeper exploration before implementation. All creative documents MUST include task ID in filename.

## üß≠ CREATIVE MODE PROCESS FLOW

```mermaid
graph TD
    Start["START CREATIVE MODE"] --> MCPGate["‚õî MCP SERVERS<br>CONTEXT GATE"]
    
    %% MCP Server Queries
    MCPGate --> QuerySys8["Query sys8 MCP<br>get_current_datetime<br>get_os_version"]
    QuerySys8 --> QueryContext7["Query context7 MCP<br>resolve-library-id<br>get-library-docs"]
    QueryContext7 --> IncludeContext["Include MCP Results<br>in Request Context"]
    
    IncludeContext --> ReadTasks["Read tasks.md<br>For Creative Requirements"]
    
    %% Initial Assessment
    ReadTasks --> VerifyPlan{"Plan Complete<br>& Creative Phases<br>Identified?"}
    VerifyPlan -->|"No"| ReturnPlan["Return to<br>PLAN Mode"]
    VerifyPlan -->|"Yes"| IdentifyPhases["Identify Creative<br>Phases Required"]
    
    %% Creative Phase Selection
    IdentifyPhases --> SelectPhase["Select Next<br>Creative Phase"]
    SelectPhase --> PhaseType{"Creative<br>Phase Type?"}
    
    %% Creative Phase Types
    PhaseType -->|"UI/UX<br>Design"| UIPhase["UI/UX CREATIVE PHASE<br>Core/creative-phase-uiux.md"]
    PhaseType -->|"Architecture<br>Design"| ArchPhase["ARCHITECTURE CREATIVE PHASE<br>Core/creative-phase-architecture.md"]
    PhaseType -->|"Data Model<br>Design"| DataPhase["DATA MODEL CREATIVE PHASE<br>Core/creative-phase-data.md"]
    PhaseType -->|"Algorithm<br>Design"| AlgoPhase["ALGORITHM CREATIVE PHASE<br>Core/creative-phase-algorithm.md"]
    
    %% UI/UX Creative Phase
    UIPhase --> UI_Problem["Define UI/UX<br>Problem"]
    UI_Problem --> UI_Research["Research UI<br>Patterns"]
    UI_Research --> UI_Options["Explore UI<br>Options"]
    UI_Options --> UI_Evaluate["Evaluate User<br>Experience"]
    UI_Evaluate --> UI_Decision["Make Design<br>Decision"]
    UI_Decision --> UI_Document["Document UI<br>Design"]
    
    %% Architecture Creative Phase
    ArchPhase --> Arch_Problem["Define Architecture<br>Challenge"]
    Arch_Problem --> Arch_Options["Explore Architecture<br>Options"]
    Arch_Options --> Arch_Analyze["Analyze Tradeoffs"]
    Arch_Analyze --> Arch_Decision["Make Architecture<br>Decision"]
    Arch_Decision --> Arch_Document["Document<br>Architecture"]
    Arch_Document --> Arch_Diagram["Create Architecture<br>Diagram"]
    
    %% Data Model Creative Phase
    DataPhase --> Data_Requirements["Define Data<br>Requirements"]
    Data_Requirements --> Data_Structure["Design Data<br>Structure"]
    Data_Structure --> Data_Relations["Define<br>Relationships"]
    Data_Relations --> Data_Validation["Design<br>Validation"]
    Data_Validation --> Data_Document["Document<br>Data Model"]
    
    %% Algorithm Creative Phase
    AlgoPhase --> Algo_Problem["Define Algorithm<br>Problem"]
    Algo_Problem --> Algo_Options["Explore Algorithm<br>Approaches"]
    Algo_Options --> Algo_Evaluate["Evaluate Time/Space<br>Complexity"]
    Algo_Evaluate --> Algo_Decision["Make Algorithm<br>Decision"]
    Algo_Decision --> Algo_Document["Document<br>Algorithm"]
    
    %% Documentation & Completion
    UI_Document & Arch_Diagram & Data_Document & Algo_Document --> GetTaskID["Get Task ID<br>from activeContext.md"]
    GetTaskID --> CreateDoc["Create Creative<br>Phase Document<br>creative-[task_id]-[feature].md"]
    CreateDoc --> UpdateTasks["Update tasks.md<br>with Decision"]
    UpdateTasks --> MorePhases{"More Creative<br>Phases?"}
    MorePhases -->|"Yes"| SelectPhase
    MorePhases -->|"No"| VerifyComplete["Verify All<br>Phases Complete"]
    VerifyComplete --> NotifyComplete["Signal Creative<br>Phases Complete"]
```

## üìã CREATIVE PHASE DOCUMENT FORMAT

Each creative phase should produce a document with this structure:

```mermaid
graph TD
    subgraph "Creative Phase Document"
        Header["üé® CREATIVE PHASE: [TYPE]"]
        Problem["PROBLEM STATEMENT<br>Clear definition of the problem"]
        Options["OPTIONS ANALYSIS<br>Multiple approaches considered"]
        Pros["PROS & CONS<br>Tradeoffs for each option"]
        Decision["DECISION<br>Selected approach + rationale"]
        Impl["IMPLEMENTATION PLAN<br>Steps to implement the decision"]
        Diagram["VISUALIZATION<br>Diagrams of the solution"]
    end
    
    Header --> Problem --> Options --> Pros --> Decision --> Impl --> Diagram
```

## üîç CREATIVE TYPES AND APPROACHES

```mermaid
graph TD
    subgraph "UI/UX Design"
        UI1["User Flow<br>Analysis"]
        UI2["Component<br>Hierarchy"]
        UI3["Interaction<br>Patterns"]
        UI4["Visual Design<br>Principles"]
    end
    
    subgraph "Architecture Design"
        A1["Component<br>Structure"]
        A2["Data Flow<br>Patterns"]
        A3["Interface<br>Design"]
        A4["System<br>Integration"]
    end
    
    subgraph "Data Model Design"
        D1["Entity<br>Relationships"]
        D2["Schema<br>Design"]
        D3["Validation<br>Rules"]
        D4["Query<br>Optimization"]
    end
    
    subgraph "Algorithm Design"
        AL1["Complexity<br>Analysis"]
        AL2["Efficiency<br>Optimization"]
        AL3["Edge Case<br>Handling"]
        AL4["Scaling<br>Considerations"]
    end
```

## üîå MANDATORY MCP SERVER CONTEXT INTEGRATION

**CRITICAL REQUIREMENT:** Before any creative phase work begins, the agent MUST query MCP servers and include their results in the request context.

### Step 1: Query sys8 MCP Server
**MANDATORY:** Query sys8 MCP server for system information:
- `get_current_datetime` - Get current date/time for design decision documentation
- `get_os_version` - Get OS/platform information for platform-specific design considerations

### Step 2: Query context7 MCP Server
**MANDATORY:** Query context7 MCP server for library documentation:
- `resolve-library-id` - Resolve library names mentioned in creative phase to Context7 library IDs
- `get-library-docs` - Get up-to-date documentation for libraries/frameworks used in design decisions

### Step 3: Include MCP Results in Context
**MANDATORY:** Include all MCP query results in the request context:
- System date/time information from sys8
- Platform/OS information from sys8
- Library documentation from context7
- Library IDs and API references from context7

### MCP Context Integration Checklist
```
‚úì MCP CONTEXT INTEGRATION CHECKLIST
- sys8 get_current_datetime queried? [YES/NO]
- sys8 get_os_version queried? [YES/NO]
- context7 resolve-library-id called for all libraries? [YES/NO]
- context7 get-library-docs called for relevant libraries? [YES/NO]
- All MCP results included in request context? [YES/NO]

‚Üí If all YES: Proceed with creative phase
‚Üí If any NO: Complete MCP queries before proceeding
```

## üìä REQUIRED FILE STATE VERIFICATION

Before creative phase work can begin, verify file state:

```mermaid
graph TD
    Start["File State<br>Verification"] --> CheckTasks{"tasks.md has<br>planning complete?"}
    
    CheckTasks -->|"No"| ErrorPlan["ERROR:<br>Return to PLAN Mode"]
    CheckTasks -->|"Yes"| CheckCreative{"Creative phases<br>identified?"}
    
    CheckCreative -->|"No"| ErrorCreative["ERROR:<br>Return to PLAN Mode"]
    CheckCreative -->|"Yes"| ReadyCreative["Ready for<br>Creative Phase"]
```

## üìã OPTIONS ANALYSIS TEMPLATE

For each creative phase, analyze multiple options:

```
## OPTIONS ANALYSIS

### Option 1: [Name]
**Description**: [Brief description]
**Pros**:
- [Pro 1]
- [Pro 2]
**Cons**:
- [Con 1]
- [Con 2]
**Complexity**: [Low/Medium/High]
**Implementation Time**: [Estimate]

### Option 2: [Name]
**Description**: [Brief description]
**Pros**:
- [Pro 1]
- [Pro 2]
**Cons**:
- [Con 1]
- [Con 2]
**Complexity**: [Low/Medium/High]
**Implementation Time**: [Estimate]

### Option 3: [Name]
**Description**: [Brief description]
**Pros**:
- [Pro 1]
- [Pro 2]
**Cons**:
- [Con 1]
- [Con 2]
**Complexity**: [Low/Medium/High]
**Implementation Time**: [Estimate]
```

## üé® CREATIVE PHASE MARKERS

Use these visual markers for creative phases:

```
üé®üé®üé® ENTERING CREATIVE PHASE: [TYPE] üé®üé®üé®

[Creative phase content]

üé® CREATIVE CHECKPOINT: [Milestone]

[Additional content]

üé®üé®üé® EXITING CREATIVE PHASE - DECISION MADE üé®üé®üé®
```

## üìä CREATIVE PHASE VERIFICATION CHECKLIST

```
‚úì CREATIVE PHASE VERIFICATION
- Problem clearly defined? [YES/NO]
- Multiple options considered (3+)? [YES/NO]
- Pros/cons documented for each option? [YES/NO]
- Decision made with clear rationale? [YES/NO]
- Implementation plan included? [YES/NO]
- Visualization/diagrams created? [YES/NO]
- tasks.md updated with decision? [YES/NO]

‚Üí If all YES: Creative phase complete
‚Üí If any NO: Complete missing elements
```

## üîÑ MODE TRANSITION NOTIFICATION

When all creative phases are complete, notify user with:

```
## CREATIVE PHASES COMPLETE

‚úÖ All required design decisions made
‚úÖ Creative phase documents created
‚úÖ tasks.md updated with decisions
‚úÖ Implementation plan updated

‚Üí NEXT RECOMMENDED MODE: BUILD MODE
```

---

## üéØ AI QUALITY RULES INTEGRATION

> **Apply these quality rules during CREATIVE mode for better design decisions.**

### Quality Rules for CREATIVE Mode

| Rule | When to Apply | Quick Reference |
|------|---------------|-----------------|
| **#6 Corner Cases** | Options analysis | Document boundaries upfront |
| **#7 Skeleton-First** | Architecture design | Create stubs before code |
| **#9 Cognitive Load** | Design evaluation | Keep designs simple (7¬±2) |
| **#13 Transaction** | Data design | Explicit isolation levels |

---

### üìã Rule #6: Corner Cases

> **Apply at:** Design Options Analysis

**One-liner:** List corner cases and boundary conditions BEFORE making design decisions.

<details>
<summary>üìñ Detailed Guidance</summary>

**During Creative Phase, Consider:**
- What happens with null/empty inputs?
- What are the boundary values?
- How do concurrent operations behave?
- What if external dependencies fail?

**Template for Design:**
```markdown
## Design Option: [Name]

### Corner Cases Handled
| Case | Scenario | How Handled |
|------|----------|-------------|
| Empty input | User submits empty | Return validation error |
| Concurrent | 100 simultaneous | Use transaction lock |
| Timeout | DB slow | Retry with backoff |
```

**Full Rule:** `Core/AI-Quality/context/corner-cases-rule.mdc`
</details>

---

### üìã Rule #7: Skeleton-First

> **Apply at:** Architecture Design Phase

**One-liner:** Create architecture skeleton with stubs. Review structure BEFORE implementation.

<details>
<summary>üìñ Detailed Guidance</summary>

**In Creative Phase:**
1. Define interfaces for all components
2. Create class skeletons with method stubs
3. Review architecture for issues
4. Document in creative phase document

**Skeleton Review Checklist:**
- [ ] All interfaces defined
- [ ] No circular dependencies
- [ ] Each class has single responsibility
- [ ] Methods are independent

**Full Rule:** `Core/AI-Quality/architecture/skeleton-rule.mdc`
</details>

---

### üìã Rule #9: Cognitive Load

> **Apply at:** Design Evaluation

**One-liner:** Keep designs simple. Max 7¬±2 components in any system view.

<details>
<summary>üìñ Detailed Guidance</summary>

**Design Complexity Limits:**
- Max 7-9 primary components per diagram
- Max 5 parameters per function signature
- Max 3 levels of nesting in any structure

**If Design Has > 9 Components:**
- Group related components
- Create abstraction layers
- Split into subsystems

**Full Rule:** `Core/AI-Quality/architecture/cognitive-load-rule.mdc`
</details>

---

### üìã Rule #13: Transaction Isolation

> **Apply at:** Data Model / Database Design

**One-liner:** For data designs, explicitly specify transaction isolation levels.

<details>
<summary>üìñ Detailed Guidance</summary>

**When Designing Data Operations:**
1. Identify concurrent access patterns
2. Specify isolation level for each operation
3. Document race condition handling
4. Plan unique constraints for deduplication

**Isolation Level Guide:**
| Operation Type | Recommended Level |
|----------------|-------------------|
| Simple read | READ COMMITTED |
| Report generation | REPEATABLE READ |
| Financial/Critical | SERIALIZABLE |
| Check-then-insert | SERIALIZABLE + CONSTRAINT |

**Full Rule:** `Core/AI-Quality/technical/transaction-rule.mdc`
</details>

---

### ‚úÖ CREATIVE Mode Quality Checkpoint

Before transitioning from CREATIVE mode:

```
‚ñ° Corner cases documented for each design option (Rule #6)?
‚ñ° Architecture skeleton defined with interfaces (Rule #7)?
‚ñ° Design complexity manageable (‚â§9 components) (Rule #9)?
‚ñ° Transaction isolation specified for data operations (Rule #13)?

‚Üí All checked: Ready for BUILD mode
‚Üí Missing items: Complete design analysis
``` 