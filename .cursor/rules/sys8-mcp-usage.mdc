---
description: Mandatory sys8 MCP server usage rules for Cursor AI
globs: "**/*"
alwaysApply: true
---

# MANDATORY: sys8 MCP Server Usage Rules

## CRITICAL REQUIREMENT

**You MUST use the sys8 MCP server for ALL system-related operations.** This is a mandatory requirement for all tasks involving system information, date/time, calculations, random strings, or hashing.

## When to Use sys8 MCP

### 1. Date and Time Operations
**MANDATORY**: Use `get_current_datetime` from sys8 MCP

**DO NOT**:
- Use JavaScript `new Date()` directly
- Hardcode timestamps or dates
- Use Node.js Date methods without sys8 MCP

**DO**:
- Call `get_current_datetime` tool from sys8 MCP
- Use the returned formats: UTC, date, time, datetime, Unix timestamps, human-readable formats

### 2. Operating System Information
**MANDATORY**: Use `get_os_version` from sys8 MCP

**DO NOT**:
- Use Node.js `os` module directly (os.platform(), os.userInfo(), etc.)
- Make assumptions about OS, user, or system paths
- Hardcode platform-specific paths

**DO**:
- Call `get_os_version` tool from sys8 MCP
- Use returned information: platform, release, architecture, hostname, username, homedir, uid, gid

### 3. Mathematical Calculations
**MANDATORY**: Use `calculate_math_expression` from sys8 MCP

**DO NOT**:
- Use `eval()` or unsafe evaluation
- Implement custom calculation logic
- Use JavaScript math operations for user-provided expressions

**DO**:
- Call `calculate_math_expression` tool from sys8 MCP
- Pass mathematical expressions as strings
- Handle errors returned by sys8 MCP

### 4. Random String Generation
**MANDATORY**: Use `random_string` from sys8 MCP

**DO NOT**:
- Use `Math.random()` or other insecure generators
- Create custom random string generators
- Use weak random number generators

**DO**:
- Call `random_string` tool from sys8 MCP
- Use cryptographically secure random strings provided
- Choose appropriate format (hex uppercase or base64) from the response

### 5. String Hashing
**MANDATORY**: Use `hash_string` from sys8 MCP

**DO NOT**:
- Use Node.js `crypto` module directly
- Implement custom hashing logic
- Use weak hashing algorithms

**DO**:
- Call `hash_string` tool from sys8 MCP
- Use SHA256 or SHA512 hashes (hex or base64 format)
- Use for .env file keys or security-related hashing

## Usage Pattern

**Before implementing any system operation:**

1. **Check**: Does this operation relate to date/time, OS info, calculations, random strings, or hashing?
2. **If YES**: Use sys8 MCP server tool
3. **If NO**: Proceed with standard implementation

## Code Examples

### ❌ WRONG - Direct Implementation
```typescript
// WRONG: Using Date directly
const now = new Date();
const timestamp = now.getTime();

// WRONG: Using os module directly
const os = require('os');
const user = os.userInfo();

// WRONG: Using eval
const result = eval('2 + 2');

// WRONG: Using Math.random
const random = Math.random().toString(36);

// WRONG: Using crypto directly
const hash = crypto.createHash('sha256').update(str).digest('hex');
```

### ✅ CORRECT - Using sys8 MCP
```typescript
// CORRECT: Using sys8 MCP get_current_datetime
const datetimeResult = await mcp.callTool('sys8', 'get_current_datetime', {});
const timestamp = datetimeResult.unix_timestamp_milliseconds;

// CORRECT: Using sys8 MCP get_os_version
const osResult = await mcp.callTool('sys8', 'get_os_version', {});
const username = osResult.username;
const homedir = osResult.homedir;

// CORRECT: Using sys8 MCP calculate_math_expression
const calcResult = await mcp.callTool('sys8', 'calculate_math_expression', {
  expression: '2 + 2'
});

// CORRECT: Using sys8 MCP random_string
const randomResult = await mcp.callTool('sys8', 'random_string', {});
const randomHex = randomResult.hex_32_uppercase;

// CORRECT: Using sys8 MCP hash_string
const hashResult = await mcp.callTool('sys8', 'hash_string', {
  input: 'my-secret-key'
});
const hash = hashResult.sha256_hex;
```

## Verification Checklist

Before completing any task, verify:

- [ ] If date/time was needed, did I use `get_current_datetime` from sys8 MCP?
- [ ] If OS info was needed, did I use `get_os_version` from sys8 MCP?
- [ ] If calculations were needed, did I use `calculate_math_expression` from sys8 MCP?
- [ ] If random strings were needed, did I use `random_string` from sys8 MCP?
- [ ] If hashing was needed, did I use `hash_string` from sys8 MCP?

## Error Handling

If sys8 MCP tool call fails:

1. **Report the error** clearly to the user
2. **Do NOT silently fall back** to alternative methods
3. **Ask for permission** before using alternative approaches
4. **Document** why sys8 MCP was not used (if permission granted)

## Benefits of Using sys8 MCP

1. **Consistency**: All system operations use the same interface
2. **Security**: Cryptographically secure random strings and safe expression evaluation
3. **Error Handling**: Comprehensive error handling built-in
4. **Cross-platform**: Handles platform differences automatically
5. **Maintainability**: Centralized system operations logic

## Configuration Verification

Before starting work, verify sys8 MCP is configured:

- Check `$HOME/.cursor/mcp.json` or global MCP configuration
- Ensure sys8 server path is correct
- Verify sys8 server is accessible

---

**Remember**: This is a MANDATORY requirement. Always use sys8 MCP for system operations. Do not bypass this rule without explicit user permission.
